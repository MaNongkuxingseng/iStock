# ğŸ›¡ï¸ Guardian Bot ä½¿ç”¨æ‰‹å†Œ

> ç‰ˆæœ¬ï¼šv1.0 Â· æ›´æ–°ï¼š2026-02-27  
> é€‚ç”¨ï¼šOpenClaw å¤š Bot ååŒåœºæ™¯ Â· è‡ªæ„ˆå±‚ç›‘æ§

---

## ğŸ“Š å¿«é€Ÿå¯åŠ¨

### 1. æŸ¥çœ‹ Guardian Bot çŠ¶æ€
```bash
# æŸ¥çœ‹æ‰€æœ‰æ´»è·ƒå­ agentï¼ˆå« guardian-botï¼‰
sessions_list --activeMinutes 5

# æŸ¥çœ‹ guardian-bot çš„è¯¦ç»†æ—¥å¿—
sessions_history --sessionKey guardian-bot --limit 10
```

### 2. æ‰‹åŠ¨è§¦å‘è¯Šæ–­
```bash
# è®© guardian-bot ç«‹å³æ‰«ææ‰€æœ‰ bot çš„å¥åº·çŠ¶æ€
sessions_send --sessionKey guardian-bot "scan now"
```

### 3. ç´§æ€¥åœç”¨
```bash
# ä¸´æ—¶åœç”¨ guardian-botï¼ˆä¸å½±å“ä¸»ä»»åŠ¡ï¼‰
subagents kill --target guardian-bot
```

---

## ğŸ” ç›‘æ§æœºåˆ¶ï¼ˆ3 å±‚å…œåº•ï¼‰

| å±‚ | æ£€æµ‹ç›®æ ‡ | è§¦å‘æ¡ä»¶ | å“åº”æ—¶é—´ |
|----|----------|-----------|-----------|
| **æ—¥å¿—ç›‘å¬** | `FailoverError`, `rate limit`, `auth failed`, `No available auth profile` | ä¸» bot è¾“å‡ºå«å…³é”®è¯ | < 2 ç§’ |
| **çŠ¶æ€è½®è¯¢** | å­ agent è¶…æ—¶ï¼ˆ>5 åˆ†é’Ÿæ— å“åº”ï¼‰ | `sessions_list` è¿”å› `lastActivity` > 5min | æ¯ 2 åˆ†é’Ÿ |
| **Feishu äº‹ä»¶** | `im:message:send_failed`ï¼ˆæ¶ˆæ¯å‘é€å¤±è´¥ï¼‰ | Feishu æ¨é€å¤±è´¥äº‹ä»¶ | å®æ—¶ |

---

## ğŸ› ï¸ è‡ªåŠ¨ä¿®å¤åŠ¨ä½œè¡¨

| é”™è¯¯ç±»å‹ | è‡ªåŠ¨è¯Šæ–­ | æ¨èåŠ¨ä½œ | éœ€äººå·¥ç¡®è®¤ |
|----------|-----------|-----------|-------------|
| `No available auth profile for openai-codex` | âœ… æ£€æµ‹åˆ° OpenAI é™é¢‘ | 1. åˆ‡æ¢è‡³ `deepseek-chat`<br>2. é‡è¯•å¤±è´¥ä»»åŠ¡ | âœ… æ˜¯ï¼ˆå‘é€ Feishu å¡ç‰‡ï¼‰ |
| `API rate limit reached` | âœ… æ£€æµ‹åˆ°é¢‘æ§ | 1. é™çº§è‡³ `qwen-plus`<br>2. å»¶è¿Ÿ 30 ç§’åé‡è¯• | âœ… æ˜¯ |
| `im:chat.access_event.bot_p2p_chat_entered_v1` ç¼ºå¤± | âœ… æ£€æµ‹åˆ°ç§èŠæƒé™ç¼ºå¤± | ç”Ÿæˆ Feishu åå°ç›´è¾¾é“¾æ¥ + æ“ä½œæŒ‡å¼• | âœ… æ˜¯ |
| `Git conflict` | âœ… æ£€æµ‹åˆ° `git status` å†²çª | 1. `git reset --hard HEAD`<br>2. é‡æ–°æ‹‰å–æœ€æ–° | âœ… æ˜¯ |
| `File not found` | âœ… æ£€æµ‹åˆ°è·¯å¾„ç¼ºå¤± | è‡ªåŠ¨åˆ›å»ºç›®å½•/æ¨¡æ¿æ–‡ä»¶ï¼ˆå¦‚ `valen-kb/01-Projects/`ï¼‰ | âŒ å¦ï¼ˆå®‰å…¨æ“ä½œï¼‰ |

---

## ğŸ“± Feishu å¡ç‰‡äº¤äº’æŒ‡å—

å½“ Guardian Bot æ£€æµ‹åˆ°éœ€å¹²é¢„çš„é”™è¯¯æ—¶ï¼Œä¼šå‘é€å¦‚ä¸‹å¡ç‰‡ï¼š

```
ğŸ›¡ï¸ Guardian Bot æ£€æµ‹åˆ°å¼‚å¸¸
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ ç›®æ ‡ï¼šcoder-bot
â€¢ é”™è¯¯ï¼šAPI rate limit reached
â€¢ ä¸Šä¸‹æ–‡ï¼šOpenAI GPT-5.3 é¢‘æ§è§¦å‘

å»ºè®®åŠ¨ä½œï¼š
âœ… åˆ‡æ¢è‡³ DeepSeek å¹¶é‡è¯•
ğŸ“„ æŸ¥çœ‹è¯¦ç»†é”™è¯¯æ—¥å¿—
ğŸš« å¿½ç•¥æ­¤é”™è¯¯ï¼ˆ24 å°æ—¶å†…ä¸å†æé†’ï¼‰
```

**æ“ä½œè¯´æ˜ï¼š**
- âœ… **ä¿®å¤** â†’ Guardian Bot å°†æ‰§è¡Œæ¨èåŠ¨ä½œï¼Œå®Œæˆåé€šçŸ¥ä½ 
- ğŸ“„ **è¯¦æƒ…** â†’ å‘é€å®Œæ•´é”™è¯¯å †æ ˆ + ä¸Šä¸‹æ–‡åˆ°å½“å‰ä¼šè¯
- ğŸš« **å¿½ç•¥** â†’ æ ‡è®°æ­¤é”™è¯¯ä¸ºâ€œå·²çŸ¥â€ï¼Œ24 å°æ—¶å†…ä¸å†æé†’

---

## ğŸ“ æ—¥å¿—æ–‡ä»¶ä½ç½®

æ‰€æœ‰ Guardian Bot çš„æ“ä½œè®°å½•å‡ä¿å­˜åœ¨ï¼š
```
G:\openclaw\workspace\_system\agent-home\memory\guardian-log-YYYY-MM-DD.md
```

ç¤ºä¾‹å†…å®¹ï¼š
```markdown
## 2026-02-27 00:05:12
- æ£€æµ‹åˆ° coder-bot FailoverError (openai-codex)
- å·²å‘é€ Feishu å¡ç‰‡è¯·æ±‚ç¡®è®¤
- ç”¨æˆ·ç‚¹å‡» âœ… ä¿®å¤
- æ‰§è¡Œï¼šåˆ‡æ¢æ¨¡å‹è‡³ deepseek-chatï¼Œé‡è¯•æˆåŠŸ
```

---

## âš™ï¸ è‡ªå®šä¹‰é…ç½®ï¼ˆé«˜çº§ï¼‰

### 1. æ‰©å±•é”™è¯¯æ£€æµ‹è§„åˆ™
åœ¨ `G:\openclaw\workspace\_system\agent-home\guardian-rules.json` ä¸­æ·»åŠ ï¼š
```json
{
  "patterns": [
    {
      "regex": "Connection refused",
      "action": "retry",
      "retryCount": 3,
      "delayMs": 5000
    }
  ]
}
```

### 2. è°ƒæ•´æ‰«æé¢‘ç‡
é€šè¿‡ç¯å¢ƒå˜é‡æ§åˆ¶ï¼š
```bash
export GUARDIAN_SCAN_INTERVAL=300000  # 5 åˆ†é’Ÿï¼ˆé»˜è®¤ 120000ï¼‰
```

### 3. æ·»åŠ ç™½åå•
åœ¨ `guardian-whitelist.txt` ä¸­åˆ—å‡ºä¸éœ€ç›‘æ§çš„ botï¼š
```
test-bot
demo-*
```

---

## ğŸš¨ æ•…éšœæ’é™¤

| ç°è±¡ | å¯èƒ½åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|-----------|-----------|
| Guardian Bot æ— å“åº” | 1. å­ agent å·²é€€å‡º<br>2. æƒé™ä¸è¶³ | 1. `sessions_spawn` é‡æ–°å¯åŠ¨<br>2. æ£€æŸ¥ `feishu_app_scopes` |
| è¯¯æŠ¥é¢‘ç¹ | æ‰«æé—´éš”è¿‡çŸ­ | è°ƒé«˜ `GUARDIAN_SCAN_INTERVAL` |
| Feishu å¡ç‰‡æœªé€è¾¾ | ç¾¤èŠ/ç§èŠæƒé™ç¼ºå¤± | æ£€æŸ¥ `im:message:send_as_bot` æƒé™ |

---

## ğŸ“ æ”¯æŒ

- **å¿«é€Ÿåé¦ˆ**ï¼šåœ¨å½“å‰ç¾¤èŠ @æˆ‘ + æè¿°é—®é¢˜
- **æ—¥å¿—æäº¤**ï¼šé™„ä¸Š `guardian-log-*.md` ç›¸å…³ç‰‡æ®µ
- **åŠŸèƒ½å»ºè®®**ï¼šç›´æ¥æå‡ºï¼Œæˆ‘å°†è¯„ä¼°å¹¶å®ç°

> Guardian Bot è®¾è®¡åŸåˆ™ï¼š**æœ€å°å¹²é¢„ã€æœ€å¤§é€æ˜ã€100% å¯æ§**ã€‚æ‰€æœ‰å…³é”®æ“ä½œå‡éœ€ä½ ç¡®è®¤ï¼Œç»ä¸è‡ªåŠ¨æ‰§è¡Œé«˜é£é™©åŠ¨ä½œã€‚

---
*æ–‡æ¡£ç”Ÿæˆæ—¶é—´ï¼š2026-02-27 00:02:00*  
*ç»´æŠ¤è€…ï¼švalen-repo ç³»ç»Ÿ*