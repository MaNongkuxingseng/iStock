# iStock项目 - Git提交规范（中文版）

## 📝 提交信息格式

```
<类型>: <主题>

<详细描述>

<关联Issue>
```

## 🎯 提交类型

| 类型 | 说明 | 示例 |
|------|------|------|
| **feat** | 新功能 | `feat: 实现股票数据采集API` |
| **fix** | 修复bug | `fix: 修复数据库连接超时问题` |
| **docs** | 文档更新 | `docs: 更新API接口文档` |
| **style** | 代码格式调整 | `style: 调整代码缩进和空格` |
| **refactor** | 代码重构 | `refactor: 重构数据验证模块` |
| **test** | 测试相关 | `test: 添加股票数据验证测试` |
| **chore** | 构建或工具变动 | `chore: 更新依赖包版本` |
| **perf** | 性能优化 | `perf: 优化数据库查询性能` |
| **ci** | 持续集成 | `ci: 配置GitHub Actions自动化测试` |
| **build** | 构建系统 | `build: 更新Docker构建配置` |
| **revert** | 回退提交 | `revert: 回退错误的数据模型变更` |

## 📋 主题规范

1. **使用中文**：所有提交信息必须使用中文
2. **简明扼要**：50字以内，清晰描述提交内容
3. **使用祈使句**：如"实现"、"修复"、"更新"等
4. **首字母小写**：不要使用句号结尾

**正确示例**：
- `feat: 实现新浪财经数据源API`
- `fix: 修复股票代码验证逻辑错误`
- `docs: 更新项目部署指南`

**错误示例**：
- `Added new feature` ❌（英文）
- `实现了一个新功能。` ❌（有句号）
- `FEAT: 新功能` ❌（类型大写）

## 📖 详细描述规范

1. **使用中文**：详细描述使用中文
2. **使用列表**：使用`-`或`*`创建列表
3. **说明原因**：解释为什么需要这个变更
4. **说明影响**：描述变更的影响范围

**示例**：
```
feat: 实现技术指标计算模块

- 添加移动平均线(MA)计算功能
- 实现相对强弱指数(RSI)计算
- 添加布林带(Bollinger Bands)计算
- 优化计算性能，支持批量处理

原因：需要为股票分析提供技术指标支持
影响：所有股票数据将自动计算技术指标
```

## 🔗 关联Issue

1. **使用关键字**：`Close`、`Fix`、`Resolve`
2. **指定Issue号**：`#123`
3. **多个Issue**：用逗号分隔

**示例**：
- `Close #45`
- `Fix #78, #79`
- `Resolve #100`

## 🎨 完整示例

### 示例1：新功能
```
feat: 实现用户持仓管理功能

- 添加用户持仓数据模型
- 实现持仓CRUD操作API
- 添加持仓盈亏计算逻辑
- 编写相关单元测试

Close #23
```

### 示例2：Bug修复
```
fix: 修复股票数据同步重复问题

- 修复数据去重逻辑错误
- 优化数据库索引性能
- 添加数据唯一性验证

原因：发现同一股票同一天有多条重复记录
影响：提高数据准确性和查询性能

Fix #56
```

### 示例3：文档更新
```
docs: 更新项目快速开始指南

- 添加Docker环境搭建步骤
- 更新数据库配置说明
- 添加常见问题解答
- 完善API调用示例

Close #89
```

## 🔧 配置Git使用中文模板

### 1. 设置提交模板
```bash
git config --local commit.template .gitmessage_zh
```

### 2. 设置编辑器（可选）
```bash
# 使用VSCode
git config --local core.editor "code --wait"

# 使用Vim
git config --local core.editor "vim"
```

### 3. 验证配置
```bash
git config --local --list | grep commit
```

## 📊 提交频率建议

1. **小步提交**：每次提交完成一个明确的功能或修复
2. **及时提交**：完成一个模块后立即提交
3. **原子提交**：每个提交应该是独立的、可回退的
4. **测试通过**：提交前确保代码通过测试

## 🚨 注意事项

1. **禁止直接提交到main分支**：使用Pull Request流程
2. **提交前检查**：运行测试和代码检查
3. **保持提交历史整洁**：使用`git rebase`整理提交
4. **关联工作项**：每个提交尽量关联Issue或任务

## 📈 质量检查清单

提交前请检查：
- [ ] 提交信息使用中文
- [ ] 提交类型正确
- [ ] 主题简明扼要
- [ ] 代码通过测试
- [ ] 代码符合规范
- [ ] 文档已更新（如需要）
- [ ] 关联了相关Issue

---

**最后更新**: 2026-02-28  
**维护者**: iStock开发团队